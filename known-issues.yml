ext-zib-LanguageProficiency-CommunicationDetails:
  zib deviations:
    Extension.value[x]:
      - cardinality: 0..1
        reason: FHIR restricts Extension.value to a max cardinality of 0..1. To use it more than once, the extension should be added 0..* in the hosting element.

zib-AddressInformation:
  zib deviations:
    Address.line.extension:streetName.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    Address.line.extension:houseNumber.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    Address.line.extension:houseNumberLetter-houseNumberAddition.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    Address.line.extension:houseNumberIndication.value[x]:
      - datatype: string
        reason: The mapping of zib AddressInformation on the FHIR Address datatype is the result of compatibility with HL7v3, which is the format that a lot of healthcare data in the Netherlands is stored in.  As a result of this, the zib HouseNumberIndication concept with CD datatype is mapped to a FHIR string datatype with a constraint added (the value can only be 'by' or 'to').
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    Address.line.extension:additionalInformation.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.

zib-ContactInformation-TelephoneNumbers:
  zib deviations:
    ContactPoint.system:
      - cardinality: 1..1
        reason: Although TelecomType and NumberType are optional in the zib, ContactPoint.system is used to identify the TelephoneNumbers concept itself when this datatype is added to a profile. If only a telephone number is given without TelecomType and NumberType, this will fall in the default slice of the profile.

zib-ContactPerson:
  zib deviations:
    RelatedPerson.name:
      - cardinality: 0..*
        reason: The cardinality mismatch between the zib (0..1) and FHIR (0..*) is explained by the presence of the HumanName.use element. A full name can be broken into parts using multiple instances of HumanName that have its own value for use. Documented in the profile too.
      - datatype: HumanName
        reason: A name in FHIR is represented using the HumanName datatype, not as a separate resource.
    RelatedPerson.address:
      - datatype: Address
        reason: An address in FHIR is represented using the Address datatype, not as a separate resource.
    RelatedPerson.telecom:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
      - cardinality: 0..*
        reason: The cardinality mismatch between the zib (0..1) and FHIR (0..*) is explained by the containers TelephoneNumbers (0..*) and EmailAddresses (0..*) inside the ContactInformation model. The FHIR datatype ContactPoint does not have these containers.

zib-MedicationContraIndication:
  zib deviations:
    Flag.code:
      - cardinality: 1..1
        reason: The zib profiles should relax the minimum cardinality from the zibs because of the conceptual cardinality concept. However, FHIR requires Flag.code to be 1..1. The case can be made that zib MedicationContraIndicationName will never be conceptual, because it is the defining factor for MedicationContraIndication. 

zib-NameInformation:
  zib deviations:
    HumanName.extension:humannameAssemblyOrder.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    HumanName.family.extension:prefix.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    HumanName.family.extension:lastName.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    HumanName.family.extension:partnerPrefix.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    HumanName.family.extension:partnerLastName.value[x]:
      - cardinality: 1..1
        reason: The used extension makes the value required (1..1), but the use of the extension itself is optional (0..1), effectively resulting a cardinality of 0..1 for this element.
    HumanName.prefix:
      - cardinality: 0..*
        reason: prefix and suffix are mapped to the "titles" concept from the zib. There's a mismatch however in the way this information is represented in the zib and in FHIR. The mapping is documented in the profile.
    HumanName.suffix:
      - cardinality: 0..*
        reason: prefix and suffix are mapped to the "titles" concept from the zib. There's a mismatch however in the way this information is represented in the zib and in FHIR. The mapping is documented in the profile.
        
zib-Patient:
  zib deviations:
    Patient.extension:nationality.extension:code.value[x]:
      - cardinality: 1..1
        reason: The used extension uses a cardinality of 1..1 on the value[x] element. However, the extension itself is added with a cardinality of 0..1.
    Patient.name:
      - cardinality: 0..*
        reason: The cardinality mismatch between the zib (0..1) and FHIR (0..*) is explained by the presence of the HumanName.use element. A full name can be broken into parts using multiple instances of HumanName that have its own value for use. Documented in the profile too.
      - datatype: HumanName
        reason: A name in FHIR is represented using the HumanName datatype, not as a separate resource.
    Patient.telecom:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
      - cardinality: 0..*
        reason: The cardinality mismatch between the zib (0..1) and FHIR (0..*) is explained by the containers TelephoneNumbers (0..*) and EmailAddresses (0..*) inside the ContactInformation model. The FHIR datatype ContactPoint does not have these containers.
    Patient.telecom:telephoneNumbers:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
    Patient.telecom:emailAddresses:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
    Patient.address:
      - datatype: Address
        reason: An address in FHIR is represented using the Address datatype, not as a separate resource.
      - cardinality: 0..*
        reason: The zib AddressInformation may be represented using multiple FHIR Address instances, hence the cardinality is wider.
    Patient.deceased[x]:deceasedDateTime:
      - short: DateOfDeath
        reason: This element is mapped to two zib concepts, DateOfDeath and DeathIndicator. However, the latter is implicit -- althougt the zib recognizes both concepts, FHIR supports populating just one of them, thus DeathIndicator is assumed to be true when DateOfDeath is populated. For clarity reasons, the metadata of deceasedDateTime is only mapped to DateOfDeath.
      - datatype: dateTime
        reason: The boolean expected by DeathIndicator is only assumed; see the explanation above.
    Patient.contact:
      - datatype: BackboneElement
        reason: The zib ContactPerson _may_ be represented as Patient.contact. There is a different use case as well, where the ContactPerson is implemented using a RelatedPerson resource.
      - cardinality: 0..*
        reason: A patient may have multiple contacts. The expected cardinality of 0..1 stems from the root concept of zib ContactPerson, but this cardinality is essentially without meaning.
    Patient.contact.name:
      - datatype: HumanName
        reason: A name in FHIR is represented using the HumanName datatype, not as a separate resource.
    Patient.contact.telecom:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
      - cardinality: 0..*
        reason: The cardinality mismatch between the zib (0..1) and FHIR (0..*) is explained by the containers TelephoneNumbers (0..*) and EmailAddresses (0..*) inside the ContactInformation model. The FHIR datatype ContactPoint does not have these containers.
    Patient.contact.telecom:telephoneNumbers:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
    Patient.contact.telecom:emailAddresses:
      - datatype: ContactPoint
        reason: ContactInformation in FHIR is represented using the ContactPoint datatype, not as a separate resource.
    Patient.contact.address:
      - datatype: Address
        reason: An address in FHIR is represented using the Address datatype, not as a separate resource.
    Patient.communication:
      - datatype: BackboneElement
        reason: The appropriate representation of zib LanguageProficiency in FHIR is Patient.communication, not a separate resource.
      - cardinality: 0..*
        reason: A patient may be proficient in multiple languages. The expected cardinality of 0..1 stems from the root concept of zib LanguageProficiency, but this cardinality is essentially without meaning.
    Patient.communication.extension:languageControl:
      - short: LanguageControlListening / LanguageControlSpeaking / LanguageControlReading
        reason: Three zib concepts are mapped to one extension in FHIR and are differentiated by their type value.
      - datatype: Extension
        reason: The mapping is placed on the extension and not on the value[x] because of the nature of this extension. The extension itself contains a valueCoding that gets the zibs value. This datatype matches the zib CD type.
      - cardinality: 0..*
        reason: Because of the nature of this extension the cardinality has a mismatch. Three zib concepts are mapped to this extension. Therefore the extension cannot be 0..1, but should be able to repeat.
