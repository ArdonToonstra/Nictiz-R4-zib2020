<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="ext-StopType" />
  <url value="http://nictiz.nl/fhir/StructureDefinition/ext-StopType" />
  <name value="ExtStopType" />
  <title value="extStopType" />
  <status value="draft" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="email" />
      <value value="info@nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="An extension to provide the manner in which medication is discontinued (temporary or definitive)." />
  <purpose value="This extension represents MedicationAgreementStopType, AdministrationAgreementStopType and MedicationUseStopType of zibs [MedicationAgreement](https://zibs.nl/wiki/MedicationAgreement-v1.2(2020EN)), [AdministrationAgreement](https://zibs.nl/wiki/AdministrationAgreement-v1.0.3(2020EN)) and [MedicationUse2](https://zibs.nl/wiki/MedicationUse2-v1.1.1(2020EN)) respectively." />
  <copyright value="Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise." />
  <fhirVersion value="4.0.1" />
  <mapping>
    <identity value="zib-medicationagreement-v1.2-2020EN" />
    <uri value="https://zibs.nl/wiki/MedicationAgreement-v1.2(2020EN)" />
    <name value="zib MedicationAgreement-v1.2(2020EN)" />
  </mapping>
  <mapping>
    <identity value="zib-administrationagreement-v1.0.3-2020EN" />
    <uri value="https://zibs.nl/wiki/AdministrationAgreement-v1.0.3(2020EN)" />
    <name value="zib AdministrationAgreement-v1.0.3(2020EN)" />
  </mapping>
  <mapping>
    <identity value="zib-medicationuse2-v1.1.1-2020EN" />
    <uri value="https://zibs.nl/wiki/MedicationUse2-v1.1.1(2020EN)" />
    <name value="zib MedicationUse2-v1.1.1(2020EN)" />
  </mapping>
  <kind value="complex-type" />
  <abstract value="false" />
  <context>
    <type value="fhirpath" />
    <expression value="MedicationRequest" />
  </context>
  <context>
    <type value="fhirpath" />
    <expression value="MedicationDispense" />
  </context>
  <context>
    <type value="fhirpath" />
    <expression value="MediationStatement" />
  </context>
  <type value="Extension" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension" />
  <derivation value="constraint" />
  <differential>
    <element id="Extension">
      <path value="Extension" />
      <definition value="The MedicationAgreementStopType, AdministrationAgreementStopType and MedicationUseStopType concepts are mapped to this ModifierExtension and not the `.status` element of the respective resources because it has a different function. The status is a field that represents the status of that resource at the moment of requesting the resource. That – in itself – makes mapping the stoptype (which may never change in an instance) to status not suitable. For example. a medication agreement which has a stoptype, may in itself be superseded by a new medication agreement instance to resume the medication. There are no specifications for status at the moment, and it is not forbidden to fill the status of the resource." />
      <max value="1" />
      <isModifier value="true" />
    </element>
    <element id="Extension.url">
      <path value="Extension.url" />
      <fixedUri value="http://nictiz.nl/fhir/StructureDefinition/ext-StopType" />
    </element>
    <element id="Extension.value[x]">
      <path value="Extension.value[x]" />
      <short value="StopType" />
      <definition value="Stop type, the manner in which this medication is discontinued (temporary or definitive)." />
      <comment value="MedicationAgreementStopType, AdministrationAgreementStopType and MedicationUseStopType all should have a ValueSetthat contain the same StopType values. Because of zib design choices, every concept gets its unique ValueSet. Due to an error in zib2020 release, where one of the ValueSets was not updated, it is chosen to bind the (correct) MedicationAgreementStopType ValueSetto this extension and reusing this extension for all three concepts." />
      <alias value="MedicatieafspraakStopType" />
      <alias value="MedicatieGebruikStopType" />
      <alias value="ToedieningsafspraakStopType" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <binding>
        <strength value="required" />
        <description value="StopType values, based on the valueset named MedicatieafspraakStopTypeCodelijst, which are are applicable for StopType in MedicationAgreement, AdministrationAgreement and MedicationUse." />
        <valueSet value="http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.9.6.1--20200901000000" />
      </binding>
      <mapping>
        <identity value="zib-medicationagreement-v1.2-2020EN" />
        <map value="NL-CM:9.6.19954" />
        <comment value="MedicationAgreementStopType" />
      </mapping>
      <mapping>
        <identity value="zib-administrationagreement-v1.0.3-2020EN" />
        <map value="NL-CM:9.8.22498" />
        <comment value="AdministrationAgreementStopType" />
      </mapping>
      <mapping>
        <identity value="zib-medicationuse2-v1.1.1-2020EN" />
        <map value="NL-CM:9.11.23132" />
        <comment value="MedicationUseStopType" />
      </mapping>
    </element>
  </differential>
</StructureDefinition>